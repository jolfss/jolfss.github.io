/*
    Harmonize fonts/text-formatting across the site.
*/

// Atkinson Hyperlegible Next
@import url('https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Next:ital,wght@0,400;0,600;1,400&display=swap');
$font-atkinson-hyperlegible-next: "Atkinson Hyperlegible Next", sans-serif;

@import url('https://fonts.googleapis.com/css2?family=Tilt+Warp:wght@300;400;500;600;700;800&display=swap');
$font-tilt-warp: "Tilt Warp", sans-serif;

// Plus Jakarta Sans - Clean modern sans-serif
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
$font-plus-jakarta: "Plus Jakarta Sans", sans-serif;

// JetBrains Mono - Monospace font for code
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap');
$font-jetbrains-mono: "JetBrains Mono", monospace;

$font-weight-black:     800;
$font-weight-bold:      700;
$font-weight-semibold:  600;
$font-weight-normal:    400;
$font-weight-light:     300;

$font-size-h1:  2.5rem;
$font-height-h1:2.75rem;
$font-weight-h1:$font-weight-black;
$font-family-h1:$font-tilt-warp;

$font-size-h2:  2.0rem;
$font-height-h2:2.25rem;
$font-weight-h2:$font-weight-bold;
$font-family-h2:$font-tilt-warp;

$font-size-h3:  1.6rem;
$font-height-h3:1.75rem;
$font-weight-h3:$font-weight-bold;
$font-family-h3:$font-tilt-warp;

$font-size-h4:    1.4rem;
$font-height-h4:  1.5rem;
$font-weight-h4:$font-weight-semibold;
$font-family-h4:$font-plus-jakarta;

$font-size-h5:  1.2rem;
$font-height-h5:1.5rem;
$font-weight-h5:$font-weight-semibold;
$font-family-h5: $font-plus-jakarta;

$font-size-h6:  1.0rem; 
$font-height-h6:1.25rem;
$font-weight-h6:$font-weight-semibold;
$font-family-h6:$font-plus-jakarta;

// Set default font settings
h1,h2,h3,h4,h5,h6,p,li{
  font-family: $font-atkinson-hyperlegible-next;
  font-weight: $font-weight-normal;
  font-size: 1.05rem;
  line-height: 1.4rem;
  color: var(--color-text);
  margin-bottom: 0.75rem;
}

// Enumerate the fonts h1-h6
$font-sizes: (1: $font-size-h1, 2: $font-size-h2, 3: $font-size-h3, 4: $font-size-h4, 5: $font-size-h5, 6: $font-size-h6);
$font-heights: (1: $font-height-h1,2: $font-height-h2,3: $font-height-h3,4: $font-height-h4,5: $font-height-h5,6: $font-height-h6);
$font-weights: (1: $font-weight-h1,2: $font-weight-h2,3: $font-weight-h3,4: $font-weight-h4,5: $font-weight-h5,6: $font-weight-h6);
$font-families: (1: $font-family-h1,2: $font-family-h2,3: $font-family-h3,4: $font-family-h4,5: $font-family-h5,6: $font-family-h6);
@for $i from 1 through 6 {
  h#{$i} {
    font-size: map-get($font-sizes, $i);
    line-height: map-get($font-heights, $i);
    font-weight: map-get($font-weights, $i);
    font-family: map-get($font-families, $i);
    margin-bottom: calc(#{map-get($font-heights, $i)}/2) ;
  }
}

p {
  text-align: justify;
}

ul, ol {
  margin-bottom: 1rem;
  padding-left: 2rem;

}

li {
  list-style-type: disc;
}

em {
  font-style: italic;
}

a {
  color: var(--color-link); 
  text-decoration: none;

  &:hover {
    text-decoration: underline;
    color: var(--color-link-hover);
  }
}

strong, b {
  font-weight: $font-weight-bold;
}

.citation {
  font-size: 0.85em;
  margin-left: 0.15rem;
  a {
    color: var(--color-link);
    &:hover {
      color: var(--color-link-hover);
    }
  }
}

.page-bibliography {
  margin-top: 2rem;
  padding-top: 0;
  border: none;

  h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  ol {
    list-style: decimal;
    padding-left: 1.5rem;
    margin-bottom: 0;
  }

  li {
    margin-bottom: 0.75rem;
    font-size: 0.95rem;
    line-height: 1.4rem;
    position: relative;
    padding: 0.35rem 0.75rem 0.35rem 2.5rem;
    border-radius: 0.65rem;
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
    scroll-margin-top: 2rem;

    &.reference-highlight,
    &:target {
      background: rgba(var(--_color-link), 0.08);
      box-shadow: inset 0 0 0 1px rgba(var(--_color-link), 0.2);
    }

    em {
      font-style: italic;
    }

    .reference-number {
      position: absolute;
      left: 0.75rem;
      top: 0.5rem;
      font-weight: $font-weight-semibold;
      color: var(--color-link);
    }
  }

  a {
    color: var(--color-link);
    &:hover {
      color: var(--color-link-hover);
    }
  }
}

// Code and monospace elements
code, pre, kbd {
  font-family: $font-jetbrains-mono;
  font-weight: $font-weight-normal;
}

code {
  background-color: var(--color-code-inline-bg);
  padding: 0.1rem 0.3rem;
  border-radius: 0.25rem;
  font-size: 0.9em;
}

pre {
  overflow-x: auto;
  padding: 1rem;
  border-radius: 0.5rem;
  background-color: var(--color-code-bg);
  margin-bottom: 1rem;

  code {
    background-color: transparent;
    padding: 0;
  }
}

// MathJax styling
mjx-container {
  // For standalone math (not in code blocks), use the default text color
  color: var(--color-text);

  // Math inside code blocks should inherit the syntax highlighting color
  pre &, code & {
    color: inherit !important;
  }

  // Target the actual math content
  mjx-math {
    color: inherit;
  }

  // Disable collapsible equations by preventing click interactions.
  // MathJax's tex-chtml.js component includes complexity analysis and generates
  // collapsible <mjx-maction> elements for complex expressions. The configuration
  // options (enableExplorer, menuOptions.settings.collapsible, etc.) are not
  // consistently honored by the tex-chtml distribution, so we use CSS to disable
  // the click behavior entirely via pointer-events.
  mjx-maction {
    pointer-events: none !important;
    cursor: default !important;
  }

  &[data-collapsible] {
    pointer-events: none !important;
    cursor: default !important;
  }
}
