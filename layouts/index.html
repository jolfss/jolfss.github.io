{{/* This content will be injected into the baseof.html template */}}
{{ define "main" }}
    <!-- welcome text and portrait -->
    <div class="home-welcome">
        <div class="container-card rem-height-ceil-js">
            <div style="display:flex; justify-content:space-between;">
                <h1>{{ .Params.title }}</h1>
                <div>
                    <h6>Bismarck, ND <b>→</b> Ithaca, NY <b>→</b> San José, CA</h6>
                </div>
            </div>
            <!-- enumerate the web pages in the site -->
            <div class="box" style="padding: 1rem 0">
                <nav style="display: flex; gap: 1rem; justify-content: left;">
                    <a href="/" class="container-tag">Home</a>
                    <a href="/projects" class="container-tag">Projects</a>
                    <a href="/blog" class="container-tag">Blog</a>
                    <a href="/pebbles" class="container-tag">Pebbles</a>
                </nav>
            </div>
            <div class="split-lr-3">    
                <div class="container-squircle live-nudge">
                    <img src="{{ .Params.portrait }}" alt="{{ .Params.portrait_alt_text }}">
                </div>
                <div class="subtext-gradient">
                    <h6 class="home-welcome-text">{{ .Params.welcome_text | .RenderString (dict "display" "block") }}</h5>
                </div>
            </div>
        </div>
    </div>
        
    {{ .Content }}
    
    <!-- some projects -->
    <div> 
        <!-- enumerate some projects which are allowed as 'featured', sorted by date -->
        {{ range first 5 
            (where 
                (where .Site.Pages.ByDate.Reverse "Section" "projects") 
            ".Params.featured" true) 
        }}
        <div class="home-projects">
            {{ $page := . }}
            <div class="container-card split-lr-5 rem-height-ceil-js">
                <div class="container-squircle live-nudge">
                    {{ range .Params.media }}
                        <img 
                            src='{{ $page.RelPermalink }}{{ index . "content" }}{{ . }}'
                            alt='{{ index . "alt_text" }}'
                        >
                    {{ end }}
                </div>
                <div class="subtext-gradient">
                    {{ .Params.description | .RenderString (dict "display" "block") }}
                </div>
            </div>
        </div>
        {{ end }}
    </div>
{{ end }}