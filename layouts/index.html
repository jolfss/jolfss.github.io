{{/* This content will be injected into the baseof.html template */}}
{{ define "main" }}

    <!-- welcome text and portrait -->
    <div class="rem-resize-container">
        <div class="card-third welcome-card">
            <div class="left">
                <img src="{{ .Params.portrait }}" alt="{{ .Params.portrait_alt_text }}">
            </div>
            <div class="right">
                {{ .Params.welcome_text | .RenderString (dict "display" "block") }}
            </div>
        </div>
    </div>
        
    {{ .Content }}
    
    <!-- some projects -->
    <div> 
        <!-- enumerate some projects which are allowed as 'featured', sorted by date -->
        {{ range first 5 
            (where 
                (where .Site.Pages.ByDate.Reverse "Section" "projects") 
            ".Params.featured" true) 
        }}
        <div class="rem-resize-container" style="margin: 2rem 0 2rem 0;">
            <div class="card-fifth">
                {{ $page := . }}
                <div class="left">
                    {{ range .Params.media }}
                        <img 
                            src='{{ $page.RelPermalink }}{{ index . "content" }}{{ . }}'
                            alt='{{ index . "alt_text" }}'
                        >
                    {{ end }}
                </div>
                <div class="right">
                    {{ .Params.description | .RenderString (dict "display" "block") }}
                    <div style="text-align: right;">
                        <h6 style="margin: 0; line-height: 0"><em>{{ .Params.Date | time.Format "2/1/2006" }}</em></h6>
                    </div>
                </div>
            </div>
        </div>
        {{ end }}
    </div>
{{ end }}